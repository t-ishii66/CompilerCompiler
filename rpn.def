START(RPN)
RPN     : EXPR { call(1); print("\n"); }
;

EXPR    : TERM "+" EXPR     { call(1); print(" "); call(2); print(" +"); }
        | TERM "-" EXPR     { call(1); print(" "); call(2); print(" -"); }
        | TERM              { call(1); }
;

TERM    : FACTOR "*" TERM   { call(1); print(" "); call(2); print(" *"); }
        | FACTOR "/" TERM   { call(1); print(" "); call(2); print(" /"); }
        | FACTOR            { call(1); }
;

FACTOR  : "(" EXPR ")"      { call(1); }
        | NUMBER            { call(1); }
;

NUMBER  : DIGIT+NUMBER      { call(1); call(2); }
        | DIGIT             { call(1); }
;

DIGIT   : "0" { print("0"); }
        | "1" { print("1"); }
        | "2" { print("2"); }
        | "3" { print("3"); }
        | "4" { print("4"); }
        | "5" { print("5"); }
        | "6" { print("6"); }
        | "7" { print("7"); }
        | "8" { print("8"); }
        | "9" { print("9"); }
;
END
